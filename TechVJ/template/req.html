<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Devbots || Video Streamer</title>
    <link rel="stylesheet" href="https://cdn.plyr.io/3.7.8/plyr.css">
    <style>
        :root {
            --bg-start: #f0f2f5;
            --bg-end: #e6e9ee;
            --text-primary: #1c1c1e;
            --text-secondary: #636366;
            --card-bg: #ffffff;
            --card-shadow: rgba(0, 0, 0, 0.08);
            --border-color: #e5e7eb;
            --nav-bg: rgba(255, 255, 255, 0.7);
            --nav-text: #555;
            --nav-active-bg: #fff;
            --nav-active-text: #007aff;
            --button-primary-bg-start: #007aff;
            --button-primary-bg-end: #0056b3;
            --button-primary-text: #ffffff;
            --vlc-color: #ff8800;
            --mx-color: #2196f3;
            --disclaimer-bg: #fffbe6;
            --disclaimer-border: #ffe58f;
            --disclaimer-text: #8a6d3b;
        }

        body.dark-mode {
            --bg-start: #1c1c1e;
            --bg-end: #2c2c2e;
            --text-primary: #ffffff;
            --text-secondary: #a0a0a5;
            --card-bg: #3a3a3c;
            --card-shadow: rgba(0, 0, 0, 0.2);
            --border-color: #4a4a4f;
            --nav-bg: rgba(28, 28, 30, 0.7);
            --nav-text: #aaa;
            --nav-active-bg: #2c2c2e;
            --nav-active-text: #0a84ff;
            --button-primary-bg-start: #0a84ff;
            --button-primary-bg-end: #005ecb;
            --button-primary-text: #ffffff;
            --vlc-color: #ff9500;
            --mx-color: #34aadc;
            --disclaimer-bg: #3a3a3c;
            --disclaimer-border: #5a5a5e;
            --disclaimer-text: #d0d0d0;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
            background: linear-gradient(135deg, var(--bg-start) 0%, var(--bg-end) 100%);
            min-height: 100vh;
            padding: 20px;
            color: var(--text-primary);
            transition: background 0.4s ease, color 0.4s ease;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        /* Navigation */
        .nav-tabs {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin-bottom: 30px;
            background: var(--nav-bg);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            padding: 8px;
            border: 1px solid var(--border-color);
        }

        .nav-tab {
            padding: 10px 20px;
            background: transparent;
            border: none;
            border-radius: 8px;
            color: var(--nav-text);
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            font-size: 15px;
        }

        .nav-tab.active {
            background: var(--nav-active-bg);
            color: var(--nav-active-text);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .nav-tab:hover:not(.active) {
            background: rgba(128, 128, 128, 0.1);
        }

        /* Page Content */
        .page {
            display: none;
            animation: fadeIn 0.4s ease;
        }

        .page.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Card styles */
        .video-card, .about-card {
            background: var(--card-bg);
            border-radius: 16px;
            box-shadow: 0 10px 30px var(--card-shadow);
            overflow: hidden;
            margin-bottom: 20px;
            border: 1px solid var(--border-color);
            transition: background 0.4s ease, border-color 0.4s ease;
        }

        .video-header, .about-header {
            padding: 24px 32px;
            text-align: center;
            border-bottom: 1px solid var(--border-color);
        }

        .video-title, .about-title {
            font-size: 24px;
            font-weight: 600;
            margin: 0;
            word-break: break-word;
            color: var(--text-primary);
        }

        .video-container {
            position: relative;
            padding-bottom: 56.25%;
            height: 0;
            overflow: hidden;
            background: #000;
        }

        .video-container .plyr {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        /* Controls Section */
        .controls, .about-content {
            padding: 32px;
        }

        .controls-title {
            font-size: 20px;
            font-weight: 600;
            text-align: center;
            margin-bottom: 24px;
            color: var(--text-primary);
        }

        .player-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-bottom: 24px;
        }

        .player-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            padding: 16px 20px;
            border: 2px solid var(--border-color);
            border-radius: 12px;
            background: var(--card-bg);
            color: var(--text-primary);
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .player-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px var(--card-shadow);
        }

        .vlc-btn { border-color: var(--vlc-color); color: var(--vlc-color); }
        .vlc-btn:hover { background: var(--vlc-color); color: white; }

        .mx-btn { border-color: var(--mx-color); color: var(--mx-color); }
        .mx-btn:hover { background: var(--mx-color); color: white; }

        .player-logo {
            width: 24px;
            height: 24px;
            border-radius: 4px;
        }

        .download-btn {
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            padding: 16px;
            background: linear-gradient(135deg, var(--button-primary-bg-start), var(--button-primary-bg-end));
            color: var(--button-primary-text);
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .download-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 122, 255, 0.3);
        }

        .icon {
            width: 20px;
            height: 20px;
            fill: currentColor;
        }

        /* About Page */
         .about-subtitle {
            opacity: 0.9;
            font-size: 16px;
            color: var(--text-secondary);
        }
        
        .about-section {
            margin-bottom: 32px;
        }

        .about-section h3 {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 12px;
            color: var(--text-primary);
        }

        .about-section p {
            line-height: 1.6;
            color: var(--text-secondary);
            margin-bottom: 12px;
        }

        .features-grid, .team-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 24px 0;
        }
        
        .feature-card, .team-member {
            background: var(--bg-start);
            border-radius: 12px;
            padding: 24px;
            text-align: center;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: 1px solid var(--border-color);
        }

        .feature-card:hover, .team-member:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 25px var(--card-shadow);
        }

        .feature-icon, .team-avatar {
             width: 48px;
            height: 48px;
            background: linear-gradient(135deg, var(--button-primary-bg-start), var(--button-primary-bg-end));
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 16px;
            color: white;
        }

        .feature-icon svg { width: 24px; height: 24px; fill: white; }

        .feature-card h4, .team-member h4 {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--text-primary);
        }

        .feature-card p, .team-member p {
            color: var(--text-secondary);
            font-size: 14px;
            line-height: 1.5;
        }
        
        .team-member { text-decoration: none; }
        .team-avatar { width: 64px; height: 64px; border-radius: 50%; font-size: 24px; font-weight: 600; }
        .team-member h4 { margin-bottom: 4px; }

        /* Disclaimer */
        .disclaimer {
            background: var(--disclaimer-bg);
            border: 1px solid var(--disclaimer-border);
            border-radius: 12px;
            padding: 16px;
            margin-top: 20px;
        }

        .disclaimer p {
            color: var(--disclaimer-text);
            font-size: 14px;
            margin: 0;
            line-height: 1.5;
        }

        .disclaimer strong {
            color: #dc3545;
        }

        /* Footer */
        .footer {
            text-align: center;
            padding: 24px;
            margin-top: 40px;
            color: var(--text-secondary);
            font-size: 14px;
        }

        .footer a {
            color: var(--text-primary);
            text-decoration: none;
            font-weight: 500;
        }
        
        /* Modal Styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(8px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease;
        }

        .modal-overlay.visible {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background: var(--card-bg);
            padding: 24px 32px;
            border-radius: 16px;
            max-width: 500px;
            width: calc(100% - 40px);
            text-align: left;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            border: 1px solid var(--border-color);
        }
        
        .modal-content h2 {
            font-size: 22px;
            margin-bottom: 16px;
            color: var(--text-primary);
            text-align: center;
        }
        
        .modal-content p {
            margin-bottom: 24px;
            line-height: 1.6;
            color: var(--text-secondary);
            font-size: 15px;
        }
        
        .modal-buttons {
            display: flex;
            gap: 12px;
            justify-content: flex-end;
        }
        
        .modal-btn {
            padding: 10px 20px;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            font-weight: 600;
            transition: background 0.2s ease;
        }
        
        .modal-btn.primary {
            background: var(--button-primary-bg-start);
            color: white;
        }
        
        .modal-btn.primary:hover {
             background: var(--button-primary-bg-end);
        }
        
        .modal-btn.secondary {
            background: var(--border-color);
            color: var(--text-secondary);
        }
        
        .modal-btn.secondary:hover {
            background: #d1d5db;
        }
        
        .access-denied {
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            justify-content: center; 
            height: 100vh; 
            text-align: center; 
            font-family: system-ui;
        }
        .access-denied .icon {
            font-size: 3rem; 
            margin-bottom: 1rem;
        }
         .access-denied h1 {
            color: #dc3545; 
            margin-bottom: 1rem;
        }
        
        .access-denied p {
            margin-bottom: 2rem; 
            color: #666;
        }
        .access-denied button {
            background: #007bff; 
            color: white; 
            border: none; 
            padding: 12px 24px; 
            border-radius: 8px; 
            font-size: 16px; 
            cursor: pointer;
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            body { padding: 10px; }
            .container { padding: 0; }
            .nav-tabs { flex-direction: column; gap: 4px; }
            .video-header, .about-header, .controls, .about-content { padding: 24px 20px; }
            .player-grid, .features-grid, .team-grid { grid-template-columns: 1fr; }
            .video-title, .about-title { font-size: 20px; }
        }
    </style>
</head>

<body>
    <div id="terms-modal" class="modal-overlay">
        <div class="modal-content">
            <h2>Terms of Service</h2>
            <p>
                By using this service, you agree that the bot does not host any content and the owner is not responsible for any files streamed. No copyright infringement is intended. Do you agree to proceed?
            </p>
            <div class="modal-buttons">
                <button id="disagree-btn" class="modal-btn secondary">Cancel</button>
                <button id="agree-btn" class="modal-btn primary">Agree & Continue</button>
            </div>
        </div>
    </div>
    
    <div class="container">
        <!-- Navigation -->
        <div class="nav-tabs">
            <button class="nav-tab active" onclick="showPage('video')">üé¨ Video Player</button>
            <button class="nav-tab" onclick="showPage('about')">üí• About Us</button>
        </div>

        <!-- Video Player Page -->
        <div id="video-page" class="page active">
            <div class="video-card">
                <div class="video-header">
                    <h1 class="video-title">{{file_name}}</h1>
                </div>
                <div class="video-container">
                    <video class="plyr" controls>
                        <source id="video-source" src="{{file_url}}" type="video/mp4" alt="Video Source">
                        Your browser does not support the video tag.
                    </video>
                </div>
                <div class="controls">
                    <h2 class="controls-title">Choose Your Player</h2>
                    <div class="player-grid">
                        <button class="player-btn vlc-btn" onclick="handlePlayerClick('vlc')">
                            <img src="https://cdn.jsdelivr.net/gh/fyaz05/Resources@main/HydroStreamerBot/vlc.png" alt="VLC" class="player-logo">
                            Open with VLC
                        </button>
                        <button class="player-btn mx-btn" onclick="handlePlayerClick('mx')">
                            <img src="https://cdn.jsdelivr.net/gh/fyaz05/Resources@main/HydroStreamerBot/mx.png" alt="MX Player" class="player-logo">
                            Open with MX Player
                        </button>
                    </div>
                    <button class="download-btn" onclick="download()">
                        <svg class="icon" viewBox="0 0 24 24">
                            <path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z" />
                        </svg>
                        Download Video
                    </button>
                    <div class="disclaimer">
                        <p><strong>‚ö†Ô∏è Disclaimer:</strong> This service is intended for streaming personal files. The platform owner holds no responsibility for the content streamed by users.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- About Page -->
        <div id="about-page" class="page">
            <div class="about-card">
                <div class="about-header">
                    <h1 class="about-title">About Us</h1>
                    <p class="about-subtitle">Revolutionizing Video Streaming Experience</p>
                </div>
                <div class="about-content">
                    <div class="about-section">
                        <h3>üöÄ Our Mission</h3>
                        <p>We're dedicated to providing the ultimate video streaming experience with seamless integration. Our goal is to make video consumption effortless, enjoyable, and accessible to everyone.</p>
                    </div>
                    <div class="features-grid">
                        <div class="feature-card">
                            <div class="feature-icon"><svg viewBox="0 0 24 24"><path d="M8 5v14l11-7z" /></svg></div>
                            <h4>Multi-Player Support</h4>
                            <p>Compatible with VLC, MX Player, and other popular media players.</p>
                        </div>
                        <div class="feature-card">
                            <div class="feature-icon"><svg viewBox="0 0 24 24"><path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z" /></svg></div>
                            <h4>Instant Downloads</h4>
                            <p>Download your favorite content quickly and securely for offline viewing.</p>
                        </div>
                        <div class="feature-card">
                             <div class="feature-icon"><svg viewBox="0 0 24 24"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z" /></svg></div>
                            <h4>Premium Quality</h4>
                            <p>High-definition streaming with adaptive quality for smooth playback.</p>
                        </div>
                    </div>
                    <div class="about-section">
                        <h3>üë®‚Äçüíª Our Team</h3>
                        <p>We're a passionate team of developers and designers working to create the best streaming service.</p>
                        <div class="team-grid">
                            <a href="https://www.instagram.com/divyanshnamdev404/" class="team-member" target="_blank" rel="noopener noreferrer">
                                <div class="team-avatar">DN</div>
                                <h4>Divyansh N</h4>
                                <p>UI/UX Designer</p>
                            </a>
                            <a href="https://www.instagram.com/_shivam_3_20/" class="team-member" target="_blank" rel="noopener noreferrer">
                                <div class="team-avatar">SR</div>
                                <h4>Shivam R</h4>
                                <p>Lead Developer</p>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer class="footer">
        <p>&copy; <span id="current-year"></span> <a href="https://t.me/devbots2" target="_blank" rel="noopener noreferrer"><b>@Devbots</b></a> & <a href="https://t.me/dsrbotzz" target="_blank" rel="noopener noreferrer"><b>@Dsrbots</b></a>. All Rights Reserved.</p>
    </footer>

    <!-- Scripts -->
    <script src="https://cdn.plyr.io/3.7.8/plyr.js"></script>
    <script>
        // --- Core Functions ---
        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
            document.querySelectorAll('.nav-tab').forEach(tab => tab.classList.remove('active'));
            document.getElementById(pageId + '-page').classList.add('active');
            event.currentTarget.classList.add('active');
        }

        function isAndroid() {
            return /Android/i.test(navigator.userAgent);
        }

        function handlePlayerClick(player) {
            if (!isAndroid()) {
                // Using a custom, non-blocking modal/alert would be even better
                console.warn("Player buttons are intended for Android devices.");
                // A custom modal or toast notification is better than alert.
                // For now, we will keep the alert as it was in the original code,
                // but it's recommended to replace it.
                alert("This feature is optimized for Android devices.");
                return;
            }
            playOnline(player);
        }

        function setVideoTypeByUrl() {
            const source = document.getElementById('video-source');
            if (!source) return;

            const url = source.src;
            if (url.endsWith('.m3u8')) source.type = 'application/x-mpegURL';
            else if (url.endsWith('.mpd')) source.type = 'application/dash+xml';
            else if (url.endsWith('.webm')) source.type = 'video/webm';
            else source.type = 'video/mp4';
        }
        
        function download() {
            const currentUrl = window.location.href;
            const finalUrl = currentUrl.replace("/watch/", "/dl/");
            window.location.href = finalUrl;
        }

        function playOnline(player) {
            const currentUrl = window.location.href;
            const finalUrl = currentUrl.replace("/watch/", "/dl/");
            const cleanedUrl = finalUrl.replace(/^https?:\/\//, '');

            const playerUrls = {
                vlc: `vlc://${cleanedUrl}`,
                mx: `intent:${finalUrl}#Intent;package=com.mxtech.videoplayer.ad;end`
            };
            if(playerUrls[player]) {
                window.location.href = playerUrls[player];
            }
        }
        
        // --- Theme Management ---
        async function setDynamicTheme() {
            try {
                // 1. Get location from IP
                const geoResponse = await fetch('https://ipapi.co/json/');
                if (!geoResponse.ok) throw new Error('Failed to fetch location');
                const geoData = await geoResponse.json();
                const { latitude, longitude } = geoData;

                // 2. Get sunrise/sunset times for that location
                const sunResponse = await fetch(`https://api.sunrise-sunset.org/json?lat=${latitude}&lng=${longitude}&formatted=0`);
                if (!sunResponse.ok) throw new Error('Failed to fetch sun times');
                const sunData = await sunResponse.json();
                
                const sunrise = new Date(sunData.results.sunrise);
                const sunset = new Date(sunData.results.sunset);
                const now = new Date();
                
                // 3. Determine theme
                if (now > sunrise && now < sunset) {
                    document.body.classList.remove('dark-mode');
                } else {
                    document.body.classList.add('dark-mode');
                }
            } catch (error) {
                console.error("Auto theme failed, falling back to system preference:", error);
                // Fallback to system preference if APIs fail
                if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                    document.body.classList.add('dark-mode');
                } else {
                    document.body.classList.remove('dark-mode');
                }
            }
        }
        
        // --- Terms Agreement Modal ---
        function handleTerms() {
            const modal = document.getElementById('terms-modal');
            const agreeBtn = document.getElementById('agree-btn');
            const disagreeBtn = document.getElementById('disagree-btn');
            
            // Show modal on page load
            setTimeout(() => modal.classList.add('visible'), 100);

            agreeBtn.addEventListener('click', () => {
                modal.classList.remove('visible');
            });

            disagreeBtn.addEventListener('click', () => {
                document.body.innerHTML = `
                    <div class="access-denied">
                        <div class="icon">‚ö†Ô∏è</div>
                        <h1>Access Denied</h1>
                        <p>You must accept the terms to proceed.</p>
                        <button onclick="location.reload()">Reload</button>
                    </div>
                `;
            });
        }

        // --- Initialization ---
        document.addEventListener('DOMContentLoaded', () => {
            handleTerms();
            setVideoTypeByUrl();
            const player = new Plyr('.plyr');
            document.getElementById('current-year').textContent = new Date().getFullYear();
            setDynamicTheme();
        });

        // --- Security Scripts ---
        document.addEventListener('contextmenu', event => event.preventDefault());

        function disabledEvent(e) {
            if (e.stopPropagation) e.stopPropagation();
            else if (window.event) window.event.cancelBubble = true;
            e.preventDefault();
            return false;
        }

        document.addEventListener("keydown", function (e) {
            if (e.ctrlKey && e.shiftKey && (e.keyCode === 73 || e.keyCode === 74)) disabledEvent(e); // Ctrl+Shift+I/J
            if (e.keyCode === 83 && (navigator.platform.match("Mac") ? e.metaKey : e.ctrlKey)) disabledEvent(e); // Ctrl/Cmd+S
            if (e.ctrlKey && e.keyCode === 85) disabledEvent(e); // Ctrl+U
            if (event.keyCode === 123) disabledEvent(e); // F12
        }, false);
        
        (function() {
            const checkDevTools = () => {
                const threshold = 160;
                if (window.outerWidth - window.innerWidth > threshold || window.outerHeight - window.innerHeight > threshold) {
                    document.body.innerHTML = `<div class="access-denied"><h1>Developer Tools Detected. Please close them to continue.</h1></div>`;
                }
            };
            setInterval(checkDevTools, 1000);

            const checkDebugger = () => {
                const minResponseTime = 100;
                const start = new Date().getTime();
                debugger;
                const end = new Date().getTime();
                if (end - start > minResponseTime) {
                     document.body.innerHTML = `<div class="access-denied"><h1>Debugger Detected. Please close it to continue.</h1></div>`;
                }
            };
            setInterval(checkDebugger, 1000);
        })();

    </script>
</body>
</html>
